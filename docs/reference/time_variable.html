<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create a single integer time period index variable — time_variable • pmdplyr</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Create a single integer time period index variable — time_variable" />

<meta property="og:description" content="This function takes either multiple time variables, or a single Date-class variable, and creates a single integer time variable easily usable with functions in pmdplyr and other packages like plm and panelr." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pmdplyr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.1.9012</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/pmdplyr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/dplyr_variants.html">pmdplyr: dplyr Variants</a>
    </li>
    <li>
      <a href="../articles/panel_tools.html">pmdplyr: Panel Tools</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/NickCH-K/pmdplyr">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create a single integer time period index variable</h1>
    <small class="dont-index">Source: <a href='https://github.com/NickCH-K/pmdplyr/blob/master/R/time_variable.R'><code>R/time_variable.R</code></a></small>
    <div class="hidden name"><code>time_variable.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>This function takes either multiple time variables, or a single Date-class variable, and creates a single integer time variable easily usable with functions in <code>pmdplyr</code> and other packages like <code>plm</code> and <code>panelr</code>.</p>
    
    </div>

    <pre class="usage"><span class='fu'>time_variable</span>(<span class='no'>...</span>, <span class='kw'>.method</span> <span class='kw'>=</span> <span class='st'>"present"</span>, <span class='kw'>.datepos</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>.start</span> <span class='kw'>=</span> <span class='fl'>1</span>,
  <span class='kw'>.skip</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>.breaks</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>.turnover</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>.turnover_start</span> <span class='kw'>=</span> <span class='fl'>NA</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>...</th>
      <td><p>variables (vectors) to be used to generate the time variable, in order of increasing specificity. So if you have a variable each for year, month, and day (with the names year, month, and day), you would use <code>year,month,day</code> (if a data set containing those variables has been attached using <code>with</code> or <code>dplyr</code>) or <code>data$year,data$month,data$day</code> (if not).</p></td>
    </tr>
    <tr>
      <th>.method</th>
      <td><p>The approach that will be taken to create your variable. See below for the options. By default, this is <code>.method = "present"</code>.</p></td>
    </tr>
    <tr>
      <th>.datepos</th>
      <td><p>A numeric vector containing the character/digit positions, in order, of the YY or YYYY year (or year/month in YYMM or YYYYMM format, or year/month/day in YYMMDD or YYYYMMDD) for the <code>.method="year"</code>, <code>.method="month"</code>, or <code>.method="day"</code> options, respectively. Give it only the data it needs - if you give <code>.method="year"</code> YYMM information, it will assume you're giving it YYYY and mess up. For example, if dates are stored as a character variable in the format '2013-07-21' and you want the year and month, you might specify <code>.datepos=c(1:4,6:7)</code>. If two-digit year is given, <code>.datepos</code> uses the <code>lubridate</code> package to determine century.</p></td>
    </tr>
    <tr>
      <th>.start</th>
      <td><p>A numeric variable indicating the day of the week/month that begins a new week/month, if <code>.method="week"</code> or <code>.method="month"</code> is used. By default, 1, where for <code>.method=week</code> 1 is Monday, 7 Sunday. If used with <code>.method="month"</code>, the time data should include day as well.</p></td>
    </tr>
    <tr>
      <th>.skip</th>
      <td><p>A numeric vector containing the values of year, month, or day-of-week (where Monday = 1, Sunday = 7, no matter what value <code>.start</code> takes) you'd like to skip over (for <code>.method="year","month","week","day"</code>, respectively). For example, with <code>.method="month"</code> and <code>.skip=12</code>, an observation in January would be determined to come one period after November. Commonly this might be <code>.skip=c(6,7)</code> with <code>.method="day"</code> to skip weekends so that Monday immediately follows Friday. If <code>.breaks</code> is also specified, select the values of <code>.breaks</code> you would like to skip, but do be aware that combining <code>.skip</code> and <code>.breaks</code> can be tricky.</p></td>
    </tr>
    <tr>
      <th>.breaks</th>
      <td><p>A numeric vector containing the starting breakpoints of year or month you'd like to clump together (for <code>.method="year','month"</code>, respectively). Commonly, this might be <code>.breaks=c(1,4,7,10)</code> with <code>.method="month"</code> to go by quarter-year. The first element of <code>.breaks</code> should usually be 1.</p></td>
    </tr>
    <tr>
      <th>.turnover</th>
      <td><p>A numeric vector the same length as the number of variables included indicating the maximum value that the corresponding variable in the list of variables takes, where NA indicates no maximum value, for use with <code>.method="turnover"</code> and required for that method. For example, if the variable list is <code>year,month</code> then you might have <code>.turnover=c(NA,12)</code>. Or if the variable list is <code>days-since-jan1-1970,hour,minute,second</code> you might have <code>.turnover=c(NA,23,59,59)</code>. Defaults to the maximum observed value of each variable if not specified, and NA for the first variable. Note that in almost all cases, the first element of <code>.turnover</code> should be <code>NA</code>, and all others should be non-NA.</p></td>
    </tr>
    <tr>
      <th>.turnover_start</th>
      <td><p>A numeric vector the same length as the number of variables included indicating the minimum value that the corresponding variable in the list of variables takes, where NA indicates no minimum value, for use with <code>method="turnover"</code>. For example, if the variable list is <code>year,month</code> then you might have <code>.turnover=c(NA,1)</code>. Or if the variable list is <code>days-since-jan1-1970,hour,minute,second</code> you might have <code>.turnover=c(NA,0,0,0)</code>. By default this is a vector of 1s the same length as the number of variables, except for the first element, which is NA. Note that in almost all cases, the first element of <code>.turnover_start</code> should be <code>NA</code>, and all others should be non-NA.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The <code>pmdplyr</code> library accepts only two kinds of time variables:</p>
<p>1. Ordinal time variables: Variables of any ordered type (<code>numeric</code>, <code>Date</code>, <code>character</code>) where the size of the gap between one value and the next does not matter. So if someone has two observations - one in period 3 and one in period 1, the period immediately before 3 is period 1, and two periods before 3 is missing. Set <code>.d=0</code> in your data to use this.</p>
<p>2. Cardinal time variables: Numeric variables with a fixed gap between one observation and the next, where the size of that gap is given by <code>.d</code>. So if <code>.d=1</code> and someone has two observations - one in period 3 and one in period 1, the period immediately before 3 is missing, and two periods before 3 is period 1.</p>
<p>If you would like to have a cardinal time variable but your data is not currently in that format, <code>time_variable()</code> will help you create a new variable that works with a setting of <code>.d=1</code>, the default.</p>
<p>If you have a date variable that is not in <code>Date</code> format (perhaps it's a string) and would like to use one of the <code>Date</code>-reliant methods below, I recommend converting it to <code>Date</code> using the convenient <code>ymd()</code>, <code>mdy()</code>, etc. functions from the <code>lubridate</code> package. If you only have partial date information (i.e. only year and month) and so converting to a <code>Date</code> doesn't work, see the <code>.datepos</code> option below.</p>
<p>Methods available include:</p>
<ul>
<li><p><code>.method="present"</code> will assume that, even if each individual may have some missing periods, each period is present in your data *somewhere*, and so simply numbers, in order, all the time periods observed in the data.</p></li>
<li><p><code>.method="year"</code> can be used with a single <code>Date</code>/<code>POSIX</code>/etc.-type variable (anything that allows <code><a href='http://lubridate.tidyverse.org/reference/date.html'>lubridate::date()</a></code>) and will extract the year from it. Or, use it with a character or numeric variable and indicate with <code>.datepos</code> the character/digit positions that hold the year in YY or YYYY format.  If combined with <code>.breaks</code> or <code>.skip</code>, will instead set the earliest year in the data to 1 rather than returning the actual year.</p></li>
<li><p><code>.method="month"</code> can be used with a single <code>Date</code>/<code>POSIX</code>/etc.-type variable (anything that allows <code><a href='http://lubridate.tidyverse.org/reference/date.html'>lubridate::date()</a></code>). It will give the earliest-observed month in the data set a value of <code>1</code>, and will increment from there. Or, use it with a character or numeric variable and indicate with <code>.datepos</code> the character/digit positions that hold the year and month in YYMM or YYYYMM format (note that if your variable is in MMYYYY format, for example, you can just give a <code>.datepos</code> argument like <code><a href='https://rdrr.io/r/base/c.html'>c(3:6,1:2)</a></code>). Months turn over on the <code>.start</code> day of the month, which is by default 1.</p></li>
<li><p><code>.method="week"</code> can be used with a single <code>Date</code>/<code>POSIX</code>/etc.-type variable (anything that allows <code><a href='http://lubridate.tidyverse.org/reference/date.html'>lubridate::date()</a></code>). It will give the earliest-observed week in the data set a value of <code>1</code>, and will increment from there. Weeks turn over on the <code>.start</code> day, which is by default 1 (Monday). Note that this method always starts weeks on the same day of the week, which is different from standard <code>lubridate</code> procedure of counting sets of 7 days starting from January 1.</p></li>
<li><p><code>.method="day"</code> can be used with a single <code>Date</code>/<code>POSIX</code>/etc.-type variable (anything that allows <code><a href='http://lubridate.tidyverse.org/reference/date.html'>lubridate::date()</a></code>). It will give the earliest-observed day in the data set a value of <code>1</code>, and increment from there. Or, use it with a character or numeric variable and indicate with <code>.datepos</code> the character/digit positions that hold the year and month in YYMMDD or YYYYMMDD format. To skip certain days of the week, such as weekends, use the <code>.skip</code> option.</p></li>
<li><p><code>.method="turnover"</code> can be used when you have more than one variable in variable and they are all numeric nonnegative integers. Set the <code>.turnover</code> option to indicate the highest value each variable takes before it starts over, and set <code>.turnover_start</code> to indicate what value it takes when it starts over. Cannot be combined with <code>.skip</code> or <code>.breaks</code>. Doesn't work with any variable for which the turnover values change, i.e. it doesn't play well with days-in-month - if you'd like to do something like year-month-day-hour, I recommend running <code>.method="day"</code> once with just the year-month-day variable, and then taking the result and combining *that* with hour in <code>.method="turnover"</code>.</p></li>
</ul>

    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span>(<span class='no'>SPrail</span>)

<span class='co'># Since we have a date variable, we can easily create integers that increment for each</span>
<span class='co'># year, or for each month, etc.</span>
<span class='co'># Likely we'd only really need one of these four, depending on our purposes</span>
<span class='no'>SPrail</span> <span class='kw'>&lt;-</span> <span class='no'>SPrail</span> <span class='kw'>%&gt;%</span>
  <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span>(
    <span class='kw'>year_time_id</span> <span class='kw'>=</span> <span class='fu'>time_variable</span>(<span class='no'>insert_date</span>, <span class='kw'>.method</span> <span class='kw'>=</span> <span class='st'>"year"</span>),
    <span class='kw'>month_time_id</span> <span class='kw'>=</span> <span class='fu'>time_variable</span>(<span class='no'>insert_date</span>, <span class='kw'>.method</span> <span class='kw'>=</span> <span class='st'>"month"</span>),
    <span class='kw'>week_time_id</span> <span class='kw'>=</span> <span class='fu'>time_variable</span>(<span class='no'>insert_date</span>, <span class='kw'>.method</span> <span class='kw'>=</span> <span class='st'>"week"</span>),
    <span class='kw'>day_time_id</span> <span class='kw'>=</span> <span class='fu'>time_variable</span>(<span class='no'>insert_date</span>, <span class='kw'>.method</span> <span class='kw'>=</span> <span class='st'>"day"</span>)
  )

<span class='co'># Perhaps I'd like quarterly data</span>
<span class='co'># (although in this case there are only two months, not much variation there)</span>
<span class='no'>SPrail</span> <span class='kw'>&lt;-</span> <span class='no'>SPrail</span> <span class='kw'>%&gt;%</span>
  <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span>(<span class='kw'>quarter_time_id</span> <span class='kw'>=</span> <span class='fu'>time_variable</span>(<span class='no'>insert_date</span>,
    <span class='kw'>.method</span> <span class='kw'>=</span> <span class='st'>"month"</span>,
    <span class='kw'>.breaks</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>, <span class='fl'>4</span>, <span class='fl'>7</span>, <span class='fl'>10</span>)
  ))
<span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span>(<span class='no'>SPrail</span>$<span class='no'>month_time_id</span>, <span class='no'>SPrail</span>$<span class='no'>quarter_time_id</span>)</div><div class='output co'>#&gt;    
#&gt;        1
#&gt;   1 1633
#&gt;   2  367</div><div class='input'>
<span class='co'># Maybe I'd like Monday to come immediately after Friday!</span>
<span class='no'>SPrail</span> <span class='kw'>&lt;-</span> <span class='no'>SPrail</span> <span class='kw'>%&gt;%</span>
  <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span>(<span class='kw'>weekday_id</span> <span class='kw'>=</span> <span class='fu'>time_variable</span>(<span class='no'>insert_date</span>,
    <span class='kw'>.method</span> <span class='kw'>=</span> <span class='st'>"day"</span>,
    <span class='kw'>.skip</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>6</span>, <span class='fl'>7</span>)
  ))</div><div class='output co'>#&gt; <span class='warning'>Warning: .skip includes some days of week that are present in the data.</span>
#&gt; <span class='warning'>Observations in these weekdays will be given a missing time value.</span></div><div class='input'>
<span class='co'># Perhaps I'm interested in ANY time period in the data and just want to enumerate them in order</span>
<span class='no'>SPrail</span> <span class='kw'>&lt;-</span> <span class='no'>SPrail</span> <span class='kw'>%&gt;%</span>
  <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span>(<span class='kw'>any_present_time_id</span> <span class='kw'>=</span> <span class='fu'>time_variable</span>(<span class='no'>insert_date</span>,
    <span class='kw'>.method</span> <span class='kw'>=</span> <span class='st'>"present"</span>
  ))


<span class='co'># Maybe instead of being given a nice time variable, I was given it in string form</span>
<span class='no'>SPrail</span> <span class='kw'>&lt;-</span> <span class='no'>SPrail</span> <span class='kw'>%&gt;%</span> <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span>(<span class='kw'>time_string</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span>(<span class='no'>insert_date</span>))
<span class='co'># As long as the character positions are consistent we can still use it</span>
<span class='no'>SPrail</span> <span class='kw'>&lt;-</span> <span class='no'>SPrail</span> <span class='kw'>%&gt;%</span>
  <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span>(<span class='kw'>day_from_string_id</span> <span class='kw'>=</span> <span class='fu'>time_variable</span>(<span class='no'>time_string</span>,
    <span class='kw'>.method</span> <span class='kw'>=</span> <span class='st'>"day"</span>,
    <span class='kw'>.datepos</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>3</span>, <span class='fl'>4</span>, <span class='fl'>6</span>, <span class='fl'>7</span>, <span class='fl'>9</span>, <span class='fl'>10</span>)
  ))
<span class='co'># Results are identical</span>
<span class='fu'><a href='https://rdrr.io/r/stats/cor.html'>cor</a></span>(<span class='no'>SPrail</span>$<span class='no'>day_time_id</span>, <span class='no'>SPrail</span>$<span class='no'>day_from_string_id</span>)</div><div class='output co'>#&gt; [1] 1</div><div class='input'>

<span class='co'># Or, maybe instead of being given a nice time variable, we have separate year and month variables</span>
<span class='no'>SPrail</span> <span class='kw'>&lt;-</span> <span class='no'>SPrail</span> <span class='kw'>%&gt;%</span>
  <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span>(
    <span class='kw'>year</span> <span class='kw'>=</span> <span class='kw pkg'>lubridate</span><span class='kw ns'>::</span><span class='fu'><a href='http://lubridate.tidyverse.org/reference/year.html'>year</a></span>(<span class='no'>insert_date</span>),
    <span class='kw'>month</span> <span class='kw'>=</span> <span class='kw pkg'>lubridate</span><span class='kw ns'>::</span><span class='fu'><a href='http://lubridate.tidyverse.org/reference/month.html'>month</a></span>(<span class='no'>insert_date</span>)
  )
<span class='co'># We can use the turnover method to tell it that there are 12 months in a year,</span>
<span class='co'># and get an integer year-month variable</span>
<span class='no'>SPrail</span> <span class='kw'>&lt;-</span> <span class='no'>SPrail</span> <span class='kw'>%&gt;%</span>
  <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span>(<span class='kw'>month_from_two_vars_id</span> <span class='kw'>=</span> <span class='fu'>time_variable</span>(<span class='no'>year</span>, <span class='no'>month</span>,
    <span class='kw'>.method</span> <span class='kw'>=</span> <span class='st'>"turnover"</span>,
    <span class='kw'>.turnover</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>NA</span>, <span class='fl'>12</span>)
  ))
<span class='co'># Results are identical</span>
<span class='fu'><a href='https://rdrr.io/r/stats/cor.html'>cor</a></span>(<span class='no'>SPrail</span>$<span class='no'>month_time_id</span>, <span class='no'>SPrail</span>$<span class='no'>month_from_two_vars_id</span>)</div><div class='output co'>#&gt; [1] 1</div><div class='input'>
<span class='co'># I could also use turnover to make the data hourly.</span>
<span class='co'># Note that I'm using the day variable from earlier to avoid having</span>
<span class='co'># to specify when day turns over (since that could be 28, 30, or 31)</span>
<span class='no'>SPrail</span> <span class='kw'>&lt;-</span> <span class='no'>SPrail</span> <span class='kw'>%&gt;%</span>
  <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span>(<span class='kw'>hour_id</span> <span class='kw'>=</span> <span class='fu'>time_variable</span>(<span class='no'>day_time_id</span>, <span class='kw pkg'>lubridate</span><span class='kw ns'>::</span><span class='fu'><a href='http://lubridate.tidyverse.org/reference/hour.html'>hour</a></span>(<span class='no'>insert_date</span>),
    <span class='kw'>.method</span> <span class='kw'>=</span> <span class='st'>"turnover"</span>,
    <span class='kw'>.turnover</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>NA</span>, <span class='fl'>23</span>),
    <span class='kw'>.turnover_start</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>NA</span>, <span class='fl'>0</span>)
  ))
<span class='co'># This could be easily extended to make the data by-minute, by-second, etc.</span></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Nick Huntington-Klein, Philip Khor.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.9100.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


